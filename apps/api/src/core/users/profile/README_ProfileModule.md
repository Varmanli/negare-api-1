# ๐งฉ Profile Module

ูุงฺูู **Profile** ูุณุฆูู ูุฏุฑุช ุฏุงุฏูโูุง ูพุฑููุงู ฺฉุงุฑุจุฑ ุฏุฑ ุจุฎุด Core ุณุณุชู ูฺฏุงุฑู ุงุณุช.  
ุงู ูุงฺูู ุตุฑูุงู ุจุง **ฺฉุงุฑุจุฑ ุงุญุฑุงุฒ ููุชโุดุฏู (Authenticated User)** ฺฉุงุฑ ูโฺฉูุฏ  
ู ุดุงูู ุฏู ูุณุฑ ุงุตู ุจุฑุง ุฎูุงูุฏู ู ุจูโุฑูุฒุฑุณุงู ุงุทูุงุนุงุช ูพุฑููุงู ุงุณุช.

---

## ๐ ุณุงุฎุชุงุฑ ูุงูโูุง

```
core/profile/
โโโ dto/
โ   โโโ update-profile.dto.ts      # DTO ุจุฑุง ูุฑุงุด ููุฏูุง ูุฌุงุฒ ูพุฑููุงู
โโโ profile.controller.ts          # ฺฉูุชุฑูุฑ ุจุฑุง ูุฏุฑุช GET/PATCH ูพุฑููุงู
โโโ profile.service.ts             # ููุทู ุจุฒูุณ ุจุฑุง ูุงฺฉุด ู ูุฑุงุด ูพุฑููุงู
โโโ profile.module.ts              # ูุงฺูู Nest ุจุฑุง ุจุงูุฏู ฺฉุฑุฏู ฺฉูุชุฑูุฑ ู ุณุฑูุณ
โโโ README.md                      # ูุณุชูุฏุงุช ุงู ูุงฺูู (ููู ูุงู)
```

---

## โ๏ธ ูุงุจุณุชฺฏโูุง (Dependencies)

- `PrismaService` ุงุฒ `@app/prisma`
- `JwtAuthGuard` ุจุฑุง ุงุญุฑุงุฒ ููุช
- `NoCacheInterceptor` ุจุฑุง ุฌููฺฏุฑ ุงุฒ ฺฉุด ุดุฏู ูพุงุณุฎโูุง

---

## ๐ก Endpointูุง

### ๐น `GET /core/profile`
**ุฏุฑุงูุช ูพุฑููุงู ฺฉุงุฑุจุฑ ูุนู**

**ูุงุฒ ุจู ุงุญุฑุงุฒ ููุช:** โ (Bearer Token)

**ูุซุงู ูพุงุณุฎ:**
```json
{
  "success": true,
  "data": {
    "id": "c1d5f0bc-6f46-4ae4-9b28-2d7574156d1b",
    "username": "negare_user",
    "name": "Negare User",
    "email": "user@example.com",
    "phone": "09121234567",
    "bio": "Capital markets enthusiast",
    "city": "Shiraz",
    "avatarUrl": "https://cdn.negare.com/avatar.png",
    "createdAt": "2024-01-01T10:00:00.000Z",
    "updatedAt": "2024-02-01T10:00:00.000Z"
  }
}
```

---

### ๐น `PATCH /core/profile`
**ูุฑุงุด ูพุฑููุงู ฺฉุงุฑุจุฑ ูุนู**

**ูุงุฒ ุจู ุงุญุฑุงุฒ ููุช:** โ (Bearer Token)

**ูุฑูุฏ (UpdateProfileDto):**
```json
{
  "name": "Negare Pro",
  "bio": "Updated profile bio",
  "city": "Tehran",
  "avatarUrl": "https://cdn.negare.com/avatar-new.png"
}
```

**ูฺฉุงุช ููู:**
- ุชุบุฑ `email` ุง `phone` ุงุฒ ุงู ูุณุฑ ูุฌุงุฒ ูุณุช.
- ุจุฑุง ุชุบุฑ ุขูโูุง ุจุงุฏ ุงุฒ ููููุง OTP ุงุณุชูุงุฏู ุดูุฏ.
- ููุฏูุง `null` ุง `""` ุจุงุนุซ ูพุงฺฉ ุดุฏู ููุฏุงุฑ ุขู ููุฏ ุฏุฑ DB ูโุดููุฏ.

**ูุซุงู ูพุงุณุฎ:**
```json
{
  "success": true,
  "data": {
    "id": "c1d5f0bc-6f46-4ae4-9b28-2d7574156d1b",
    "username": "negare_user",
    "name": "Negare Pro",
    "bio": "Updated profile bio",
    "city": "Tehran",
    "avatarUrl": "https://cdn.negare.com/avatar-new.png",
    "email": "user@example.com",
    "phone": "09121234567",
    "updatedAt": "2024-03-01T10:00:00.000Z"
  }
}
```

---

## ๐ง ููุทู ุจุฒูุณ (Business Logic)

- ููุท ฺฉุงุฑุจุฑ ูุงฺฏูโุดุฏู ูโุชูุงูุฏ ุจู ุงู ูุณุฑูุง ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดุฏ.
- ูุฑ ุฏู endpoint ุชูุณุท `JwtAuthGuard` ูุญุงูุธุช ูโุดููุฏ.
- ูพุงุณุฎโูุง `NoCacheInterceptor` ุฏุงุฑูุฏ ุชุง ุฏุฑ ูุฑูุฑฺฏุฑ ุง CDN ุฐุฎุฑู ูุดููุฏ.
- ุณุฑูุณ `ProfileService` ูุณุฆูู ูุฑูุงูโุณุงุฒ ููุงุฏุฑ (trim / nullify) ุงุณุช.
- ูุฑฺฏููู ุชูุงุด ุจุฑุง ุชุบุฑ `email` ุง `phone` ุฎุทุง `400 Bad Request` ุจุฑูโฺฏุฑุฏุงูุฏ.

---

## ๐งช ุชุณุช ุฏุฑ Postman

**Collection Example:**  
```
Authorization: Bearer <accessToken>
```

1๏ธโฃ `GET {{baseUrl}}/core/profile`  
โก๏ธ ุงูุชุธุงุฑ ูพุงุณุฎ `200 OK` ุจุง ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ.

2๏ธโฃ `PATCH {{baseUrl}}/core/profile`  
ุจุฏููโ JSON ูุดุงุจู ููููู ุจุงูุง.  
โก๏ธ ุงูุชุธุงุฑ ูพุงุณุฎ `200 OK` ุจุง ููุงุฏุฑ ุจูโุฑูุฒุดุฏู.

3๏ธโฃ ุงุฑุณุงู ููุฏ `email` ุง `phone`  
โก๏ธ ุงูุชุธุงุฑ ูพุงุณุฎ `400 Bad Request` ุจุง ูพุงู  
`ุจุฑุง ุชุบุฑ ุงูู ุง ููุจุงู ูุทูุงู ุงุฒ ูุณุฑ ุชุงุฏ OTP ุงุณุชูุงุฏู ฺฉูุฏ.`

---

## ๐งฑ Swagger Docs
ุฏุฑ ูุณุฑ `/docs`  
ุฒุฑ ุฏุณุชูู **User Profile** ุฏู endpoint ููุงุด ุฏุงุฏู ูโุดูุฏ:
- โ `GET /core/profile`
- โ `PATCH /core/profile`

---

## ๐ ุฎูุงุตู

| ูุงุจูุช | ูุถุนุช |
|---------|--------|
| ุฎูุงูุฏู ูพุฑููุงู | โ |
| ูุฑุงุด ูพุฑููุงู | โ |
| ุฌููฺฏุฑ ุงุฒ ุชุบุฑ ุดูุงุฑู/ุงูู | โ |
| ุณุงุฒฺฏุงุฑ ุจุง Swagger | โ |
| ุชุณุชโุดุฏู ุจุง Postman | โ |

---

**ูฺฏุงุฑู - Core/Profile Module**  
ูุณุฎู: `v1.0.0`  
ููุณูุฏู: _ุงูุฑุญุณู ู ุฑุงุจุฑุช โค๏ธ_
